import{_ as x,o as S,c as k,a as d,x as W,y as $,f as b,z as N,e as R,g as D,I as U,N as E,A as q,B as F,C as A,b as h,w as g,u as i,D as _,E as J,H as K,t as M,J as j,K as G,L as O,M as Q}from"./index.e2d357a0.js";import{l as X,s as w,r as Y}from"./index.9e4e606a.js";const Z=""+new URL("logo.1e8c34ec.png",import.meta.url).href,ee={name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:16},fontSizeMax:{type:Number,default:40},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:38}},methods:{randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){let o=this.randomNum(e,t),l=this.randomNum(e,t),r=this.randomNum(e,t);return"rgb("+o+","+l+","+r+")"},drawPic(){let t=document.getElementById("s-canvas").getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let o=0;o<this.identifyCode.length;o++)this.drawText(t,this.identifyCode[o],o);this.drawLine(t),this.drawDot(t)},drawText(e,t,o){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";let l=(o+1)*(this.contentWidth/(this.identifyCode.length+1)),r=this.randomNum(this.fontSizeMax,this.contentHeight-5);var a=this.randomNum(-45,45);e.translate(l,r),e.rotate(a*Math.PI/180),e.fillText(t,0,0),e.rotate(-a*Math.PI/180),e.translate(-l,-r)},drawLine(e){for(let t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{identifyCode(){this.drawPic()}},mounted(){this.drawPic()}},te={class:"s-canvas"},oe=["width","height"];function ne(e,t,o,l,r,a){return S(),k("div",te,[d("canvas",{id:"s-canvas",width:o.contentWidth,height:o.contentHeight},null,8,oe)])}const ie=x(ee,[["render",ne]]);const I=e=>(G("data-v-96eeac45"),e=e(),O(),e),ae={class:"login"},se=I(()=>d("img",{src:Z,width:"100",class:"logo",alt:""},null,-1)),le={class:"login-form"},re={style:{display:"flex",width:"100%","margin-top":"10px"}},de=I(()=>d("div",{class:"identify"},"\u9A8C\u8BC1\u7801",-1)),ue={style:{margin:"16px"}},me={__name:"Login",setup(e){W();let t=$(),o=b({username:"13784477371",password:"123456",isTitle:!0}),{username:l,password:r,isTitle:a}=N(o),T=b({identifyCodes:"1234567890",identifyCode:""}),{identifyCodes:f,identifyCode:m}=N(T),c=R("");D(()=>{m.value="",y(f.value,4)});let V=(u,n)=>Math.floor(Math.random()*(n-u)+u),v=()=>{m.value="",y(f.value,4)},y=(u,n)=>{for(let p=0;p<n;p++)m.value+=f.value[V(0,f.value.length)];console.log(m.value)},L=()=>{if(c.value!==m.value){Q("\u9A8C\u8BC1\u7801\u9519\u8BEF"),m.value="",y(f.value,4),c.value="";return}o.isTitle?X(o.username,o.password).then(u=>{u.resultCode==200&&(localStorage.setItem("mltoken",u.data),t.replace("/home"),w({type:"success",message:"\u767B\u5F55\u6210\u529F"}))}):Y(o.username,o.password).then(u=>{u.resultCode==200&&(w({type:"success",message:"\u6CE8\u518C\u6210\u529F"}),o.isTitle=!0)})},H=()=>{t.back()};return(u,n)=>{const p=U,B=E,C=q,P=F,z=A;return S(),k("div",ae,[d("header",null,[h(B,{title:i(a)?"\u767B\u5F55":"\u6CE8\u518C","left-arrow":"",onClickLeft:i(H)},{right:g(()=>[h(p,{name:"ellipsis",size:"18"})]),_:1},8,["title","onClickLeft"])]),se,d("div",le,[h(z,{onSubmit:i(L)},{default:g(()=>[h(C,{modelValue:i(l),"onUpdate:modelValue":n[0]||(n[0]=s=>_(l)?l.value=s:l=s),name:"\u7528\u6237\u540D",label:"\u7528\u6237\u540D",placeholder:"\u624B\u673A\u53F7",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u624B\u673A\u53F7"}]},null,8,["modelValue"]),h(C,{modelValue:i(r),"onUpdate:modelValue":n[1]||(n[1]=s=>_(r)?r.value=s:r=s),type:"password",name:"\u5BC6\u7801",label:"\u5BC6\u7801",placeholder:"\u5BC6\u7801",rules:[{required:!0,message:"\u8BF7\u586B\u5199\u5BC6\u7801"}]},null,8,["modelValue"]),d("div",re,[de,J(d("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":n[2]||(n[2]=s=>_(c)?c.value=s:c=s)},null,512),[[K,i(c)]]),d("div",{class:"code",onClick:n[3]||(n[3]=(...s)=>i(v)&&i(v)(...s)),style:{width:"112px"}},[h(ie,{identifyCode:i(m)},null,8,["identifyCode"])])]),d("div",ue,[d("p",{class:"link-register",onClick:n[4]||(n[4]=s=>_(a)?a.value=!i(a):a=!i(a))},M(i(a)?"\u7ACB\u5373\u6CE8\u518C":"\u5DF2\u6709\u8D26\u53F7\uFF0C\u7ACB\u5373\u767B\u5F55"),1),h(P,{round:"",block:"",type:"primary","native-type":"submit"},{default:g(()=>[j(M(i(a)?"\u767B\u5F55":"\u6CE8\u518C"),1)]),_:1})])]),_:1},8,["onSubmit"])])])}}},fe=x(me,[["__scopeId","data-v-96eeac45"]]);export{fe as default};
